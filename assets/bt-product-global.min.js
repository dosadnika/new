$.extend(!0,BT,{initProductThumbsSlider:function(t){var i=this,e="",a=this.options.productGroup,o=this.selectors.productGroup;t&&(e=t+" "),0<$(e+o.thumbsSlider).length&&$(e+o.thumbsSlider).each(function(){var t={};$.extend(!0,t,a.smallSlider),$(this).hasClass(o.thumbsSliderVerticalClass)&&(t.vertical=!0,t.verticalSwiping=!0),t.prevArrow=$(this).siblings(".slick-prev"),t.nextArrow=$(this).siblings(".slick-next"),i.preInitSlider($(this),!0);$(this).slick(t),$(this).parents(o.wrap)})},destroyProductThumbsSlider:function(t){var i="",e=this.selectors.productGroup;t&&(i=t+" "),0<$(i+e.thumbsSlider).length&&$(i+e.thumbsSlider).each(function(){$(this).slick("unslick")})},pauseCurrentProductVideo:function(t){if(null!=this.data.productVideo.currentPlayer){t.find(this.selectors.mediaBtn).removeClass("hide");var i=this.data.productVideo.currentType;"youtube"==i&&this.data.productVideo.loadYoutubeApi?(this.data.productVideo.currentPlayer.pauseVideo(),$("#"+this.data.productVideo.currentYoutubePlayerId).parents(".youtube-wrapper").addClass("hide")):"vimeo"==i&&this.data.productVideo.loadVimeoApi?(this.data.productVideo.currentPlayer.pause(),$("#"+this.data.productVideo.currentVimeoPlayerId).addClass("hide")):this.data.productVideo.currentPlayer.pause(),this.data.productVideo.currentPlayer=null,this.data.productVideo.currentType=null}},playProductVideo:function(t,i){var e=this.selectors.productGroup,a=i.find(e.video);0<a.length&&(t.find(this.selectors.mediaBtn).addClass("hide"),a.hasClass(e.videoYoutube.replace(".",""))?this.loadCssJsLib("youtube",function(){if(this.data.productVideo.loadYoutubeApi)this.initYoutubePlayer(a);else var t=setInterval(function(){YT.loaded&&(clearInterval(t),this.data.productVideo.loadYoutubeApi=!0,this.initYoutubePlayer(a))}.bind(this),100)}.bind(this)):a.hasClass(e.videoVimeo.replace(".",""))?this.loadCssJsLib("vimeo",function(){this.data.productVideo.loadVimeoApi=!0,this.initVimeoPlayer(a)}.bind(this)):(this.data.productVideo.currentType="custom",this.data.productVideo.currentPlayer=a.get(0),this.data.productVideo.currentPlayer.play()))},initYoutubePlayer:function(t){var i=t.attr("data-player-id"),e=t.attr("data-video-id"),a=$("#"+i);a.parents(".youtube-wrapper").removeClass("hide"),t.css("opacity",0),this.data.productVideo.currentYoutubePlayerId=i,this.data.productVideo.currentType="youtube",a.hasClass("loaded")?YT.get(i).playVideo():(a.addClass("loaded"),new YT.Player(i,{height:"480",width:"100%",playerVars:{autohide:0,autoplay:1,branding:0,cc_load_policy:0,controls:1,fs:1,iv_load_policy:3,modestbranding:1,playsinline:0,quality:"hd720",rel:0,showinfo:0,wmode:"opaque"},videoId:e,events:{onReady:function(t){t.target.mute(),t.target.playVideo()}}})),this.data.productVideo.currentPlayer=YT.get(i)},initVimeoPlayer:function(t){var i=$("#"+t.attr("data-player-id")),e=i.attr("id");if(this.data.productVideo.currentType="vimeo",this.data.productVideo.currentVimeoPlayerId=e,null==this.data.productVideo.vimeoPlayers[e]){i.removeClass("hide");var a=new Vimeo.Player(i.get(0),{width:800});a.setVolume(0),a.play(),this.data.productVideo.currentPlayer=a}else this.data.productVideo.currentPlayer=this.data.productVideo.vimeoPlayers[e],this.data.productVideo.currentPlayer.play()},play3dModel:function(t){t.hasClass("loaded")||(t.trigger("mediaVisible"),t.addClass("loaded"))},init3dModel:function(t,i){var e=$("[data-product-media-type-model]",t);e.length<1||theme.ProductModel.init(e,i)},initProductMainSliderAndZoom:function(t,i,e){var l=this,a="",o=this.options.productGroup,c=this.selectors.productGroup;if(t&&(a=t+" "),0<$(a+c.mainsSlider).length){var d=l.data.cacheWindowWidth<768?i:e;setTimeout(function(){$(a+c.mainsSlider).each(function(){var t={};$.extend(!0,t,o.mainSlider),l.preInitSlider($(this),!0);var s=$(this).slick(t),r=$(this).parents(c.wrap);l.playProductVideo(r,s.find(".slick-current")),l.initProductMainZoom(r),s.on("afterChange",function(t,i,e,a){var o=i.$slider.find(".slick-current "+c.mainLink);if(0<r.find(c.thumbs).length){var d=r.find(c.thumbs),n=d.find(c.thumb+":not(slick-clone) "+c.thumbLink+'[data-image-id="'+o.attr("data-image-id")+'"]').parent();n.siblings(".active").removeClass("active"),n.addClass("active"),d.hasClass(c.thumbsSlider.replace(".",""))&&l.gotoSliderIndex(d,1*n.attr("data-slick-index"))}l.initProductMainZoom(r),l.pauseCurrentProductVideo(r),l.playProductVideo(r,i.$slider.find(".slick-current")),o.hasClass(c.mainLinkModel.replace(".",""))?(l.play3dModel(o),s.slick("slickSetOption","swipe",!1,!1),s.addClass("play-model")):s.hasClass("play-model")&&(s.slick("slickSetOption","swipe",!0,!1),s.removeClass("play-model")),o.hasClass(c.ignoreLightBoxClass)?s.addClass("no-light-box-icon"):s.removeClass("no-light-box-icon")})})}.bind(this),d)}else l.initProductMainZoom($(a+c.wrap))},destroyProductMainSliderAndZoom:function(t){var i=this,e="",a=this.selectors.productGroup;t&&(e=t+" "),0<$(e+a.mainsSlider).length&&$(e+a.mainsSlider).each(function(){$(this).slick("unslick");var t=$(this).parents(a.wrap);i.destroyProductMainZoom(t)})},destroyZoom:function(t,i,e){1==e?null!=this.data.zoom[t]&&(this.data.zoom[t].closeZoom(),this.data.zoom[t].destroy(),this.data.zoom[t]=void 0):"object"==typeof this.data.zoom[t]&&null!=this.data.zoom[t]&&null!=this.data.zoom[t][i]&&(this.data.zoom[t][i].closeZoom(),this.data.zoom[t][i].destroy(),this.data.zoom[t][i]=void 0)},initZoom:function(t,i,e,a,o){1==a?(1==o&&null==this.data.zoom[i]||0==o)&&(this.data.zoom[i]=new CloudZoom(t,this.options.productZoom)):(null==this.data.zoom[i]&&(this.data.zoom[i]={}),(1==o&&null==this.data.zoom[i][e]||0==o)&&(this.data.zoom[i][e]=new CloudZoom(t,this.options.productZoom)))},initProductMainZoom:function(t){if(!(this.data.cacheWindowWidth<=1200)){var i=this.selectors.productGroup,e=this,a=t.attr("data-zoom-scope"),o=t.find(i.main+" "+i.imgZoom).length;0<o&&null!=a&&new Promise(function(t,i){e.loadCssJsLib("zoom",t)}).then(function(){t.find(i.main+" "+i.imgZoom).each(function(){var i=$(this);i.imagesLoaded(function(){var t=i.parent().attr("data-image-id");e.data.cacheWindowWidth>e.options.windowScreen.mobile&&(e.destroyZoom(a,t,o),e.initZoom(i,a,t,o,!1)),$(window).on(e.data.resizeEventName,function(){e.data.cacheWindowWidth>e.options.windowScreen.mobile?e.initZoom(i,a,t,o,!0):e.destroyZoom(a,t,o)})})})},function(t){})}},destroyProductMainZoom:function(t){if(!(this.data.cacheWindowWidth<=1200)){var i=this.selectors.productGroup,e=t.attr("data-zoom-scope"),a=t.find(i.main+".slick-current "+i.imgZoom).length;0<a&&null!=e&&this.data.cacheWindowWidth>this.options.windowScreen.mobile&&this.destroyZoom(e,imageId,a)}},changeMainImage:function(a,o){var d=this.selectors.productGroup,n=this;a.find(d.mainImg).each(function(){var t,i=$(this),e=i.attr("data-image-size");t=null!=e?n.resizeImage(o,e).replace("_1x1.","_{width}x."):o,i.parent(":not(.not-loading)").addClass("loading"),i.attr("data-src",t),i.addClass("lazyload"),a.removeClass(d.loadingClass)})},updateMainThumbnail:function(t,i,e){if(null==i||0==i.length){if(null==e)return;this.changeMainImage(t,e)}else{var a,o=this.selectors.productGroup;if(0<t.find(o.mainsSlider).length)a=t.find(o.mainLink+'[data-image-id="'+i.attr("data-image-id")+'"]').parents(".slick-slide").first().attr("data-slick-index"),this.gotoSliderIndex(t.find(o.mainsSlider),a);else this.changeMainImage(t,i.attr("href"))}},updateNewVariant:function(t,o,d,n,i,e,a){var s=this.selectors.productGroup,r=(this.options.productGroup,this);t.find(s.price).html(this.getVariantPriceHtml(t,o)),t.find(s.stickySmallPrice).html(this.getPriceHtml(o.price)),this.convertCurrencySilence(t.find("span.money")),t.hasClass("single")&&this.updateStorePickup(t,o);var l=BT.data.outStockGroup[t.attr("data-product-handle")],c=!a&&null!=l,u=[];o.options.length;if(c){t.find(s.option+".last "+s.optionValue).removeClass(s.swatchOutStock),t.find(s.option+".last  option").removeAttr("disabled");for(var h=0;h<o.options.length-1;h++)u.push(o.options[h])}var p,m,f=t.find(s.optionSubValue);(t.find(s.option).each(function(){var e=$(this).attr("data-index"),t=$(this).hasClass("swatch"),a=$(this).hasClass("last");t?($(this).find(".selected,.hide").removeClass("selected hide"),$(this).find(s.optionValue).each(function(){if($(this).attr("data-value")==o.options[e]&&$(this).addClass("selected"),1==e&&-1==d.indexOf($(this).attr("data-value"))?$(this).addClass("hide"):2==e&&-1==n.indexOf($(this).attr("data-value"))&&$(this).addClass("hide"),a&&c){u.push($(this).attr("data-value"));var t=u.join(" / ");-1<l.indexOf(t)&&$(this).addClass(s.swatchOutStock),u.pop()}})):$(this).find(s.optionValue).each(function(){var i;0<e&&(1==e?i=d:2==e&&(i=n),$(this).find("option").each(function(){if($(this).removeClass("hide").removeAttr("selected").removeAttr("disabled"),-1==i.indexOf($(this).attr("value"))&&$(this).addClass("hide").attr("disabled","disabled"),a&&c){u.push($(this).attr("value"));var t=u.join(" / ");-1<l.indexOf(t)&&$(this).attr("disabled","disabled"),u.pop()}}));$(this).val(o.options[e])}),0<f.length&&$(this).hasClass("swatch--color")&&f.html(o.options[e])}),o.available)?((m=t.find(s.cartBtn)).removeAttr("disabled"),m.removeClass("soldout"),p=theme.preOrder&&"continue"==o.inventory_policy&&o.inventory_quantity<=0?theme.strings.preOrderText:theme.strings.addToCart,m.attr("title",p),"tooltip"==m.attr("data-toggle")&&m.tooltip("fixTitle"),m.find("span").text(p),t.find(s.stockText).text(theme.strings.instockText).removeClass("soldout")):((m=t.find(s.cartBtn)).attr("disabled","disabled"),m.addClass("soldout"),m.attr("title",theme.strings.soldOut),"tooltip"==m.attr("data-toggle")&&m.tooltip("fixTitle"),m.find("span").text(theme.strings.soldOut),t.find(s.stockText).text(theme.strings.soldOut).addClass("soldout"));t.find(s.variantId).val(o.id),t.find(s.variantId).trigger("change"),0<t.find(s.variantTitle).length&&t.find(s.variantTitle).text(o.title);var v=t.find(s.thumbLink+'[data-image-id="'+o.featured_media.id+'"]');if(i&&this.updateMainThumbnail(t,v,o.featured_media.src),null!=t.attr("data-history")){var g=window.location.href.split("?"),y=g[0]+"?";1<g.length&&g[1]?-1<g[1].indexOf("variant")?y+=g[1].replace(/(variant=).*?(&|$)/,"$1"+o.id+"$2"):y+=g[1]+"&variant="+o.id:y+="variant="+o.id,window.history.replaceState({path:y},"",y)}if(0<t.find(s.labelDeal).length){var w=t.find(s.labelDeal);if(o.compare_at_price&&o.compare_at_price>o.price){if(w.removeClass("hide"),0<w.find(s.labelPercent).length){var C=Math.floor((o.compare_at_price-o.price)/o.compare_at_price*100);w.find(s.labelPercent).html(C+"%")}}else w.addClass("hide")}if(0<t.find(s.singleProgress).length&&(o.available?(t.find(s.singleProgress).removeClass("hide"),0<o.inventory_quantity?(t.find(s.stockText1).removeClass("hide"),t.find(s.stockText2).addClass("hide")):(t.find(s.stockText2).removeClass("hide"),t.find(s.stockText1).addClass("hide")),0<t.find(s.stockNumber).length&&t.find(s.stockNumber).text(o.inventory_quantity)):t.find(s.singleProgress).addClass("hide")),0<t.find(s.syncUrl).length){var b=t.find(s.syncUrl).attr("href").split("?")[0]+"?variant="+o.id;t.find(s.syncUrl).attr("href",b)}var V=t.find(s.sku);0<V.length&&(o.sku?(V.text(o.sku),V.parent().removeClass("hide")):V.parent().addClass("hide")),null!=t.attr("data-sync-pg")&&e&&$(t.attr("data-sync-pg")).each(function(){$(this).find(s.groupData).attr("data-value",t.find(s.groupData).attr("data-value")),r.updateNewVariant($(this),o,d,n,!0,!1,a)})},initMainLightboxGallery:function(){var i=this.selectors.productGroup,e=this;$(document).on("click",i.mainLink,function(t){$(this).hasClass(i.ignoreLightBoxClass)||(t.preventDefault(),$(this).parents(i.wrap).find(e.selectors.mediaBtn).trigger("click",[$(this).attr("data-image-id")]))})},openLightboxByPhotoswipe:function(t,o){var d=this,n=this.selectors.productGroup;if(0<t.find(n.mainLink).length){var s=[],r=0,l=0;t.find(n.mainLink+":not(.hide)").each(function(t,i){if(!$(this).hasClass(n.ignoreLightBoxClass)){var e=$(this),a=e.attr("title");a=a&&a.replace(/ group-(.*?) /g," ").replace(/group-(.*?) /g,"").split("group")[0],null!=o?$(this).attr("data-image-id")==o&&(r=l):$(this).parent().hasClass("active")&&(r=l),s.push({src:e.attr("href"),w:e.attr("data-width"),h:e.attr("data-height"),msrc:d.resizeImage(e.attr("href"),"96x"),title:a,el:e.parent()[0]}),l++}});var i=document.querySelectorAll(".pswp")[0],e={index:r,getThumbBoundsFn:function(t){var i=s[t].el.getElementsByTagName("img")[0],e=window.pageYOffset||document.documentElement.scrollTop,a=i.getBoundingClientRect();return{x:a.left,y:a.top+e,w:a.width}},shareButtons:[]};new PhotoSwipe(i,PhotoSwipeUI_Default,s,e).init()}},initMediaButton:function(){var o=this,d=this.selectors.productGroup,n=!1;$(document).on("click",this.selectors.mediaBtn,function(t,i){if(t.preventDefault(),!n){n=!0;var e=$(this).parents(d.wrap),a=$(this);o.startLoadingBtn(a),o.showLoadingFull(),o.loadSnippetAjax("photoswipe",function(){o.loadCssJsLib("photoswipe",function(){null==i&&(i=e.find(d.mainsSlider+" .slick-current "+d.mainLink).attr("data-image-id")),o.endLoadingBtn(a),o.hideLoadingFull(),o.openLightboxByPhotoswipe(e,i),n=!1})},700)}})},initProductGlobal:function(){this.initMediaButton(),this.initMainLightboxGallery();var p=this.selectors.productGroup,m=(this.options.productGroup,this);$(document).on("click",p.thumbLink,function(t){if(t.preventDefault(),!$(this).parent().hasClass("active")){var i=$(this),l=i.attr("data-image-id"),c=i.parents(p.wrap),u=!1;if(null!=t.originalEvent&&(u=!0),i.parent().addClass("active").siblings(".active").removeClass("active"),0<c.find(p.option).length){var h=c.attr("data-product-handle");new Promise(function(i,t){null==m.data.productGroup[h]?(c.addClass(p.loadingClass),m.callAjax(theme.rootUrl+"products/"+h,"get",{view:"tjson"},null,function(t){m.data.productGroup[h]=$.parseJSON(t.replace("\x3c!-- BEGIN template --\x3e","").replace("\x3c!-- product.tjson --\x3e","").replace("\x3c!-- END template --\x3e","")),c.removeClass(p.loadingClass),i()})):i()}).then(function(){var a,o,e=[],d=[],n=0,s=[];if(c.find(p.option).each(function(){var t;$(this).attr("data-index");t=$(this).hasClass("swatch")?$(this).find(".selected").attr("data-value"):$(this).find(p.optionValue).val(),s.push(t)}),$.each(m.data.productGroup[h],function(t,i){if(i.featured_media.id==l){a=i;var e=0;$.each(i.options,function(t,i){s[t]==i&&(e+=3-t)}),n<e&&(o=i,n=e)}}),null!=o&&(a=o),null!=a){var r=(s=a.options).length;$.each(m.data.productGroup[h],function(t,i){i.options[0]==s[0]&&1<r&&-1==e.indexOf(i.options[1])&&e.push(i.options[1]),1<r&&i.options[0]==s[0]&&i.options[1]==s[1]&&2<r&&-1==d.indexOf(i.options[2])&&d.push(i.options[2])}),m.updateNewVariant(c,a,e,d,u,!0,!1)}else u&&(i.hasClass("loaded")||(i.addClass("loaded"),c.addClass(p.loadingClass)),m.updateMainThumbnail(c,i))},function(t){})}else u&&m.updateMainThumbnail(c,i)}})}}),BT.initProductGlobal(),theme.ProductModel=function(){var o={},s={},r={},l="[data-product-single-media-group]",c="[data-shopify-xr]";function d(t){if(!t)if(window.ShopifyXR){for(var i in o)if(o.hasOwnProperty(i)){var e=o[i];if(e.loaded)continue;var a=$("#ModelJson-"+i);window.ShopifyXR.addModels(JSON.parse(a.html())),e.loaded=!0}window.ShopifyXR.setupXRElements()}else document.addEventListener("shopify_xr_initialized",function(){d()})}function i(t){if(!t)for(var i in s)if(s.hasOwnProperty(i)){var e=s[i];e.modelViewerUi||(e.modelViewerUi=new Shopify.ModelViewerUI(e.$element)),a(e)}}function a(t){var i=r[t.sectionId];t.$container.on("mediaVisible",function(){i.$element.attr("data-shopify-model3d-id",t.modelId),BT.data.isTouchDevide||t.modelViewerUi.play()}),t.$container.on("mediaHidden",function(){i.$element.attr("data-shopify-model3d-id",i.defaultId),t.modelViewerUi.pause()}).on("xrLaunch",function(){t.modelViewerUi.pause()})}return{init:function(t,n){o[n]={loaded:!1},t.each(function(t){var i=$(this),e=i.data("media-id"),a=$(i.find("model-viewer")[0]),o=a.data("model-id");if(0===t){var d=i.closest(l).find(c);r[n]={$element:d,defaultId:o}}s[e]={modelId:o,sectionId:n,$container:i,$element:a}}),window.Shopify.loadFeatures([{name:"shopify-xr",version:"1.0",onLoad:d},{name:"model-viewer-ui",version:"1.0",onLoad:i}]),BT.loadCssJsLib("modelViewerUiStyles")},removeSectionModels:function(t){for(var i in s){if(s.hasOwnProperty(i))s[i].sectionId===t&&(s[i].modelViewerUi.destroy(),delete s[i])}delete o[t]}}}();