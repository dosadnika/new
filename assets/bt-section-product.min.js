$.extend(!0,BT,{loadRecentViewedProductsSingle:function(e){if(void 0!==e&&0!=e.length){var t=this,i=e.find(".rencent-view-ele"),n=i.find(".recent-view-list"),o=i.attr("data-id"),a=parseInt(i.attr("data-limit")),r=this.getCookieItemsValue(!0,this.options.recentView.cookieName),s=r.indexOf(o);if(-1<s&&r.splice(s,1),0<r.length){r.reverse();var l=r.slice(0,a);this.callAjax(theme.searchUrl,"GET",{view:"recent_view_slider",q:BT.getQueryByIds(l),type:"product"},null,function(e){n.hasClass("slick-initialized")&&n.slick("unslick"),n.html(e),0<n.find(".grid__item").length&&(t.convertCurrencySilence(n.find("span.money")),t.applyCustomColorSwatches(n),i.fadeIn(300,function(){t.initSlider(i,!1),t.popularAddedWishlistItems(i)}))})}}},sendRecommendationTrekkieEvent:function(e){if(window.ShopifyAnalytics&&window.ShopifyAnalytics.lib&&window.ShopifyAnalytics.lib.track){var t=e.find(".grid__item").length;window.ShopifyAnalytics.lib.track("Product Recommendations Displayed",{theme:Shopify.theme.name,didPageJumpOccur:!0,numberOfRecommendationsDisplayed:t})}},loadRecommendationProduct:function(a){var r=this;0<a.length&&this.initScrollingWindowTriggerOnce(a,"recommendation",-170,function(){var e,t=a.attr("data-product-id"),i=a.attr("data-limit"),o=a.data("view");a.hasClass("loaded")?("recommendation"==o?((e=a.children(".cross-sell-list")).addClass(r.selectors.slider.useTouchMobile+" "+r.selectors.slider.default.replace(".","")),r.initSlider(a,!1),r.initDealCountdown(e),r.popularAddedWishlistItems(e)):(e=a.parents(".freb__inner").first(),BTFreBought.init()),r.applyCustomColorSwatches(e)):r.callAjax(theme.recommendationUrl+".json","GET",{product_id:t,limit:i},"json",function(e){if(0<e.products.length){var i=[],n={};$.each(e.products,function(e,t){i.push(t.handle),n[t.handle]=t.url});var t=i.join(",");r.callAjax(theme.rootUrl,"GET",{view:o,q:t},null,function(e){var t;"recommendation"==o?((t=a.children(".cross-sell-list")).html(e),t.addClass(r.selectors.slider.useTouchMobile+" "+r.selectors.slider.default.replace(".","")),r.initSlider(a,!1),r.initDealCountdown(t)):(t=a.parents(".freb__inner").first()).append(e),r.addRecommendationUrls(t,n),r.sendRecommendationTrekkieEvent(t),r.convertCurrencySilence(t.find("span.money")),r.applyCustomColorSwatches(t),r.reLoadReview(t),BTFreBought.init(),a.parent().find(".loading-not-full").remove()})}else a.hide()},function(){a.hide()})})},initStickyCartProductPage:function(){if(0<$(".sc").length){var o=this;$(".sc").removeClass("hide"),$(window).on(this.data.scrollEventName,function(e,t){if(o.data.pageLoaded&&0==BT.data.updatingProductOptions)if("down"==t){var i=$(".button--single-cart-main"),n=0<$(".sticky-menu.active").length?$(".sticky-menu").height():0;$(window).scrollTop()+n>i.offset().top?$(".sc").addClass("sc--active"):$(".sc").removeClass("sc--active")}else $(".sc").removeClass("sc--active")});var t=!1,i="sc__close--working";function n(){$(".sc__close").toggleClass(i),t=!1,$(".sc").toggleClass("open")}o.data.cacheWindowWidth<992?($(".sc__close").removeClass(i),$(".sc__inner").hide(),$(".sc").removeClass("open")):($(".sc__inner").show(),$(".sc").addClass("open")),$(".sc__close").on("click",function(e){e.preventDefault(),t||(t=!0,$(".sc__inner").toggle("slow",function(){$(".sc__close").toggleClass(i),t=!1,$(".sc").toggleClass("open")}))}),$(".sc__trigger").on("click touchend",function(e){if(e.preventDefault(),!t){t=!0;$(".sc").hasClass("open");$(".sc").hasClass("open")?$(".sc__inner").slideUp(300,n):$(".sc__inner").slideDown(300,n)}}),$(".qty-box__input--single").on("change",function(){var e=this;$(".qty-box__input--single").each(function(){$(this).is(e)||$(this).val($(e).val())})})}},alignReviewMasonryForm:function(){var e=$(".product-review-masonry");if(0<e.length){e.removeAttr("style");var t=$(".product-media-masonry-align"),i=t.offset().top+t.outerHeight()+20-e.offset().top;i<0&&e.css("margin-top",i+"px")}},initAlignReviewForm:function(){if(0<$(".product-review-masonry").length){this.alignReviewMasonryForm();var t=this;$(window).on(this.data.resizeEventName,function(e){setTimeout(function(){t.alignReviewMasonryForm()},300)})}},initTabAccordion:function(){$(document).on("click",".tab-accordion__trigger",function(e){if(e.preventDefault(),!$(this).hasClass("working")){$(this).addClass("working");var t=$(this),i=(t.parent().first().siblings(".nav-tabs"),$(t.attr("href")));t.toggleClass("open"),t.hasClass("open")?i.slideDown(300,function(){t.removeClass("working")}):i.slideUp(300,function(){t.removeClass("working")})}}),$(document).on("shown.bs.tab",'.tab-accordion-list a[data-toggle="tab"]',function(e){var t=$(e.target).attr("href"),i=$(t);i.addClass("open").show(),i.siblings('.tab-accordion__trigger[href="'+t+'"]').addClass("open")}),$(document).on("hidden.bs.tab",'.tab-accordion-list a[data-toggle="tab"]',function(e){var t=$(e.target).attr("href"),i=$(t);i.removeClass("open").hide(),i.siblings('.tab-accordion__trigger[href="'+t+'"]').removeClass("open")})},initSizeChart:function(){if(0<$(".sizechart-trigger").length){var r=this;$(".sizechart-trigger").unbind("click"),$(".sizechart-trigger").on("click",function(e){if(e.preventDefault(),$(this).hasClass("sizechart-trigger--inline")){var t=$(".sizechart-table"),i=t.parents(".tab-pane"),n=0;if(!i.hasClass(".active")){var o=i.attr("id");$('.nav-tab-item a[href="#'+o+'"]').trigger("click"),n=300}setTimeout(function(){var e=t.offset().top-80;0<$(".use-sticky").length&&(e-=60),e+="px",$("body,html").animate({scrollTop:e},800)},n)}else{var a=$(this).attr("data-modal-id");r.showPopup("#"+a)}})}0<$(".sizeChartModal .rte").length&&($(".sizeChartModal").removeClass("hide"),this.rteWrap(".sizeChartModal .rte"))},updateStorePickup:function(i,e){var n=this.selectors.productGroup,o=i.find(n.storePickupWrap);if(0<o.length)if(e.available){o.addClass("loading-store-data");var t=theme.rootUrl+"variants/"+e.id;this.callAjax(t,"get",{section_id:"store-availability"},null,function(e){var t=$(".store-availability-information",e);0<t.length?(o.find(n.storePickupInner).html(t[0].outerHTML),$("body").find(n.storePickupModel).remove(),$("body").append($(n.storePickupModel,e)),$(n.storePickupProductTitle).text(i.find(".product-single__title").text()),o.removeClass("hide")):o.addClass("hide"),o.removeClass("loading-store-data"),BT.initAlignReviewForm()})}else o.addClass("hide");else BT.initAlignReviewForm()}}),theme.productTemplate={},theme.ProductTemplateSection=function(e){var n=this.$container=$(e),o=this.sectionId=n.attr("data-section-id"),a=this.obj="#ProductSection-"+o,t=n.find(".product-single-json");if(0<t.length){var i=t.attr("data-handle");BT.data.productGroup[i]=$.parseJSON(t.html()),BT.addProductRecentView(t.attr("data-id")),BT.updateStorePickup(n.find(BT.selectors.productGroup.wrap).first(),BT.data.productGroup[i][t.attr("data-current-variant-id")])}BT.data.loadedSnippets.push("preload-product-single-general.scss");var r=BT.data.cacheWindowWidth<768?2e3:500;BT.initProductThumbsSlider(a),BT.initProductMainSliderAndZoom(a,2300,1500),BT.initDealCountdown(a),BT.applyCustomColorSwatches(a),setTimeout(function(){BT.initStickyCartProductPage(),0<$(".sc").length&&BT.applyCustomColorSwatches(".sc"),BT.rteWrap(a+" .rte");var e=$(".upsell-ele--single");0<e.length&&BT.initScrollingWindowTriggerOnce(e,"upsell_single",-170,function(){BT.loadUpsell(n.find(BT.selectors.upsell.wrap))});var t=$(".rencent-view-ele-point");0<t.length&&BT.initScrollingWindowTriggerOnce(t,"recent_view_single",-170,function(){BT.loadRecentViewedProductsSingle(t)});var i=$(".load-crossell");0<i.length?BT.loadRecommendationProduct(i):0<$(".freb__inner").length&&BTFreBought.init(),BT.initSizeChart(),BT.runProgressBar(n.find(".progress-bar")),0<$(".pg__review-stars--trigger").length&&($(".pg__review-stars--trigger").unbind("click"),$(".pg__review-stars--trigger").on("click",function(e){e.preventDefault();var t=$(".pg__review-form"),i=t,n=t.parents(".tab-pane");if(0<n.length){var o=n.attr("id");i=$('.nav-tab-item a[href="#'+o+'"]'),n.hasClass(".active")||i.trigger("click")}if(!BT.isInViewport(i,window)){var a=i.offset().top-100;0<$(".use-sticky").length&&(a-=60),$("html, body").animate({scrollTop:a},400)}})),BT.init3dModel(this.$container,o)}.bind(this),r),theme.productTemplate[a]="#"+n.attr("id")},theme.ProductTemplateSection.prototype=_.assignIn({},theme.ProductTemplateSection.prototype,{onSelect:function(e){e.detail.load&&(BT.reLoadReview(this.obj),BT.alignReviewMasonryForm()),$(e.target).find(".product-single,.sc").removeAttr("data-history")},onBlockSelect:function(e){var t=$(e.target),i=$('a[href="#'+t.attr("id")+'"]');if(t.hasClass("active")||i.trigger("click"),!BT.isInViewport(i,e.currentTarget.defaultView)){var n=i.offset().top-100;$("html, body").animate({scrollTop:n},400)}},onUnload:function(){delete theme.productTemplate[this.obj],theme.ProductModel.removeSectionModels(this.sectionId)}}),BT.initTabAccordion(),theme.sections.constructors.product=theme.ProductTemplateSection;